import{a as M,c as x}from"./chunk-JRMGAHIZ.js";import{a as ie,b as oe,c as re,d as ae,e as ne,f as me}from"./chunk-XOEGTAZY.js";import"./chunk-AKPSIYXH.js";import"./chunk-FWEEK3AB.js";import{r as ee}from"./chunk-X4ZPY7MU.js";import{A as W,B as $,F as J,G as K,H as X,K as Y,L as Z,b as T,d as g,f as k,g as A,j,l as B,m as N,n as V,o as z,q,r as G,t as C,u as L,v as O,w as Q,y as H,z as U}from"./chunk-TC6JZHBV.js";import"./chunk-RGNDWIHZ.js";import"./chunk-TBBBRDCQ.js";import"./chunk-7E4ZDMYO.js";import{a as te}from"./chunk-LJR3HAMU.js";import{b as P}from"./chunk-NMDXMUNG.js";import"./chunk-D3SPV6B2.js";import{Hb as o,Ib as r,Jb as u,Ob as v,Ub as w,Vb as y,Wb as I,Zb as E,_b as i,ac as c,bb as m,cb as l,f as R,g as p,gc as h,lc as _,ma as f,vb as F,xb as d}from"./chunk-XMWXLGNA.js";var D=R(te());var b=R(te());var S=(()=>{class a{data;fb;matDialog;svc;form;constructor(t,e,n,s){this.data=t,this.fb=e,this.matDialog=n,this.svc=s}ngOnInit(){this.form=this.fb.group({reasonForRejection:["",[g.required,g.maxLength(300)]]})}cleanForm(){this.form.patchValue({reasonForRejection:""})}onSubmit(){return p(this,null,function*(){if(this.form.valid&&(yield b.default.fire({title:"\xBFDeseas aprobar este reporte?",icon:"question",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"})).isConfirmed){let e=this.form.value;e.accepted=!1,this.svc.request(this.data.id,e).subscribe(n=>{b.default.fire("El reporte fue rechazado con exito"),this.matDialog.close({change:!0})})}})}static \u0275fac=function(e){return new(e||a)(l(oe),l(z),l(ie),l(x))};static \u0275cmp=f({type:a,selectors:[["app-report-form"]],standalone:!0,features:[h],decls:22,vars:2,consts:[[1,"title"],[3,"formGroup"],[1,"w-full","mb-3"],["matInput","","formControlName","reasonForRejection","cdkTextareaAutosize","","cdkAutosizeMinRows","3","cdkAutosizeMaxRows","5",3,"maxlength"],[1,"flex","justify-end","w-full","flex-wrap"],["mat-raised-button","","type","button","mat-dialog-close","","color","warn",1,"ml-[5px]","mt-[5px]"],["mat-raised-button","","type","button",1,"ml-[5px]","mt-[5px]",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"ml-[5px]","mt-[5px]",3,"click"]],template:function(e,n){e&1&&(o(0,"mat-dialog-content")(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"h2",0),i(5,"Rechazar reporte"),r()()(),o(6,"mat-card-content")(7,"section")(8,"form",1)(9,"mat-form-field",2)(10,"mat-label"),i(11,"Motivo de rechazo"),r(),u(12,"textarea",3),o(13,"mat-error"),i(14,"El campo es requerido"),r()()(),o(15,"div",4)(16,"button",5),i(17," Cancelar "),r(),o(18,"button",6),v("click",function(){return n.cleanForm()}),i(19," Limpiar "),r(),o(20,"button",7),v("click",function(){return n.onSubmit()}),i(21," Guardar "),r()()()()()()),e&2&&(m(8),d("formGroup",n.form),m(4),d("maxlength",300))},dependencies:[K,J,W,$,Z,Y,X,q,j,T,k,A,V,B,N,ee,me,ae,ne,U,L,Q,H,O,C,G]})}return a})();function de(a,se){if(a&1&&(o(0,"p",2),i(1,"Titulo:"),r(),i(2),o(3,"p",2),i(4,"Description:"),r(),i(5),o(6,"p",2),i(7,"Ubicaci\xF3n:"),r(),i(8),o(9,"p",2),i(10,"Creado por:"),r(),i(11),o(12,"p",2),i(13,"Estado:"),r(),i(14),o(15,"p",2),i(16,"Tipo:"),r(),i(17),u(18,"br")),a&2){let t=se.$implicit;m(2),c(" ",t.title," "),m(3),c(" ",t.description," "),m(3),c(" ",t.location," "),m(3),c(" ",t.userCreate.name," "),m(3),c(" ",t.status.name," "),m(3),c(" ",t.type.name," ")}}var je=(()=>{class a{svc;matDialog;homeCms;constructor(t,e){this.svc=t,this.matDialog=e}homeSvc;ngOnInit(){this.homeSvc={title:"Validar reportes",get:this.svc.getReport.bind(this.svc),delete:this.svc.delete.bind(this.svc),formComponent:S,showDelete:!1,showEdit:!1,showCreate:!1,submenu:[{text:"Aprobar",icon:"check",click:t=>p(this,null,function*(){if((yield D.default.fire({title:"\xBFDeseas aprobar este reporte?",icon:"question",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"})).isConfirmed){let n={accepted:!0,reasonForRejection:""};this.svc.request(t.id,n).subscribe(s=>p(this,null,function*(){yield D.default.fire("Se aprob\xF3 con \xE9xito"),this.homeCms.getData(this.homeCms.pageNumber,this.homeCms.pageSize)}))}})},{text:"Rechazar",icon:"cancel",click:t=>{this.matDialog.open(S,{data:t,width:"60%",minWidth:"280px"}).afterClosed().subscribe(e=>{e.change&&this.homeCms.getData(this.homeCms.pageNumber,this.homeCms.pageSize)})}}]}}static \u0275fac=function(e){return new(e||a)(l(x),l(re))};static \u0275cmp=f({type:a,selectors:[["app-reports-home"]],viewQuery:function(e,n){if(e&1&&w(M,5),e&2){let s;y(s=I())&&(n.homeCms=s.first)}},standalone:!0,features:[h],decls:3,vars:2,consts:[["cellTemplate",""],[3,"homeSvc","templateRef"],[1,"subtitleItem"]],template:function(e,n){if(e&1&&(u(0,"app-home-cms",1),F(1,de,19,6,"ng-template",null,0,_)),e&2){let s=E(2);d("homeSvc",n.homeSvc)("templateRef",s)}},dependencies:[M,C,P]})}return a})();export{je as ReportsValidComponent};

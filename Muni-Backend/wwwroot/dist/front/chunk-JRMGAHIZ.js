import{c as ye,d as we,e as Ce,f as De}from"./chunk-XOEGTAZY.js";import{a as Re}from"./chunk-AKPSIYXH.js";import{a as ue,b as he,c as fe,d as me,e as pe,f as ge}from"./chunk-FWEEK3AB.js";import{j as de}from"./chunk-X4ZPY7MU.js";import{G as se,L as le,q as ne,r as E,t as I,u as O,v as N,w as oe,x as re,y as A,z as j}from"./chunk-TC6JZHBV.js";import{c as ve}from"./chunk-TBBBRDCQ.js";import{a as _e}from"./chunk-LJR3HAMU.js";import{a as ae,b as ce}from"./chunk-NMDXMUNG.js";import{X as U,a as J,h as ee,j as te,n as ie}from"./chunk-D3SPV6B2.js";import{$b as F,Bc as G,Cb as u,Db as V,Fb as z,Gb as $,Ha as S,Hb as r,Ib as a,Jb as x,Kb as v,Lb as p,Ob as m,Qb as s,Rb as k,Rc as X,Sb as T,Zb as Z,_b as l,ac as M,bb as c,bc as K,ca as B,cb as D,da as R,f as q,g as _,gc as C,ha as L,hc as Y,ic as Q,ma as w,na as b,vb as d,wa as h,xa as f,xb as y}from"./chunk-XMWXLGNA.js";var be=(()=>{let o=class o{};o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=b({type:o}),o.\u0275inj=R({imports:[de]});let t=o;return t})();var Se=(()=>{let o=class o{};o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=b({type:o}),o.\u0275inj=R({imports:[U,be,U]});let t=o;return t})();var P=q(_e());var Be=()=>[5,10,15,20],xe=t=>({$implicit:t});function Le(t,o){if(t&1){let e=p();r(0,"button",5),m("click",function(){h(e);let n=s();return f(n.openForm())}),l(1),a()}if(t&2){let e=s();c(),M(" Crear ",e.homeSvc().title," ")}}function Ve(t,o){t&1&&v(0)}function ze(t,o){if(t&1){let e=p();r(0,"button",13),m("click",function(){h(e);let n=s(2).$implicit,g=s(2);return f(g.openForm(n))}),r(1,"mat-icon"),l(2,"edit"),a(),r(3,"span"),l(4,"Editar"),a()()}}function $e(t,o){if(t&1){let e=p();r(0,"button",13),m("click",function(){h(e);let n=s(2).$implicit,g=s(2);return f(g.deleteItem(n))}),r(1,"mat-icon"),l(2,"delete"),a(),r(3,"span"),l(4,"Borrar"),a()()}}function Qe(t,o){if(t&1){let e=p();r(0,"button",13),m("click",function(){h(e);let n=s().$implicit,g=s(3).$implicit,ke=s(2);return f(ke.clickBtn(n.click,g))}),r(1,"mat-icon"),l(2),a(),r(3,"span"),l(4),a()()}if(t&2){let e=s().$implicit;c(2),F(e.icon),c(2),F(e.text)}}function Ue(t,o){if(t&1&&d(0,Qe,5,2,"button",12),t&2){let e=o.$implicit,i=s(3).$implicit;u(e.show===void 0||e.show(i)?0:-1)}}function We(t,o){if(t&1&&z(0,Ue,1,1,null,null,V),t&2){let e=s(4);$(e.homeSvc().submenu)}}function qe(t,o){if(t&1&&(r(0,"mat-card",9)(1,"mat-card-header"),x(2,"mat-card-title"),r(3,"mat-card-subtitle"),d(4,Ve,1,0,"ng-container",10),a()()(),r(5,"mat-menu",11,0),d(7,ze,5,0,"button",12)(8,$e,5,0,"button",12)(9,We,2,0),a()),t&2){let e=Z(6),i=s().$implicit,n=s(2);y("matMenuTriggerFor",e),c(4),y("ngTemplateOutlet",n.templateRef)("ngTemplateOutletContext",Q(6,xe,i)),c(3),u(n.homeSvc().showEdit===void 0||n.homeSvc().showEdit===!0?7:-1),c(),u(n.homeSvc().showDelete===void 0||n.homeSvc().showDelete===!0?8:-1),c(),u(n.homeSvc().submenu?9:-1)}}function Ze(t,o){t&1&&v(0)}function Ke(t,o){if(t&1&&(r(0,"mat-card",8)(1,"mat-card-header"),x(2,"mat-card-title"),r(3,"mat-card-subtitle"),d(4,Ze,1,0,"ng-container",10),a()()()),t&2){let e=s().$implicit,i=s(2);c(4),y("ngTemplateOutlet",i.templateRef)("ngTemplateOutletContext",Q(2,xe,e))}}function Ye(t,o){if(t&1&&d(0,qe,10,8)(1,Ke,5,4,"mat-card",8),t&2){let e=o.$implicit,i=s(2);u(i.showMenu(e)?0:1)}}function Ge(t,o){if(t&1){let e=p();r(0,"section",6),z(1,Ye,2,1,null,null,V),a(),r(3,"footer")(4,"mat-paginator",7),m("page",function(n){h(e);let g=s();return f(g.changePagination(n))}),a()()}if(t&2){let e=s();c(),$(e.data),c(3),y("length",e.dataSize)("pageSize",10)("pageIndex",e.pageNumber)("pageSizeOptions",Y(4,Be))}}function Xe(t,o){t&1&&x(0,"img",4)}var oi=(()=>{class t{dialog;route;routeAct;constructor(e,i,n){this.dialog=e,this.route=i,this.routeAct=n}data=[];pageNumber=0;pageSize=10;dataSize=0;homeSvc=S.required();templateRef;showMenu(e){return this.homeSvc().submenu!==void 0&&this.homeSvc().submenu.filter(i=>i.show===void 0||i.show(e)).length>0||this.homeSvc().showEdit===void 0||this.homeSvc().showEdit===!0||this.homeSvc().showDelete===void 0||this.homeSvc().showDelete===!0}ngOnInit(){this.getData(this.pageNumber,this.pageSize)}getData(e,i){this.homeSvc().get({pageNumber:e+1,pageSize:i,query:this.homeSvc()?.query}).subscribe(n=>{n.total>0?(console.log("res",n),this.data=n.items,this.dataSize=n.total):(this.data=[],this.dataSize=0,P.default.fire("No se encontraron registros","","info"))})}changePagination(e){this.pageNumber=e.pageIndex,this.pageSize=e.pageSize,this.getData(this.pageNumber,this.pageSize)}deleteItem(e){return _(this,null,function*(){(yield P.default.fire({title:"\xBFEstas seguro de eliminar este registro?",icon:"warning",showCancelButton:!0})).isConfirmed&&this.homeSvc().delete(e.id).subscribe(()=>_(this,null,function*(){yield P.default.fire("Eliminado","Registro eliminado","success"),this.pageNumber=0,this.getData(this.pageNumber,this.pageSize)}))})}openForm(e){let i={routerAct:this.routeAct,data:e};this.dialog.open(this.homeSvc().formComponent,{width:"60%",minWidth:"280px",data:i}).afterClosed().subscribe(n=>{n?.modify&&this.getData(this.pageNumber,this.pageSize)})}clickBtn(e,i){return _(this,null,function*(){e&&(typeof e=="string"?this.route.navigate([e,i.id]):yield e(i))})}static \u0275fac=function(i){return new(i||t)(D(ye),D(te),D(ee))};static \u0275cmp=w({type:t,selectors:[["app-home-cms"]],inputs:{homeSvc:[1,"homeSvc"],templateRef:"templateRef"},standalone:!0,features:[C],decls:6,vars:3,consts:[["menu","matMenu"],[1,"flex","justify-between","flex-wrap"],[1,"title"],["mat-raised-button","",1,"sm:mb-0","mb-[10px]"],["src","noFound.webp","alt","",1,"sm:w-[40%]","w-[90%]","left-0","right-0","mx-auto","rounded-3xl"],["mat-raised-button","",1,"sm:mb-0","mb-[10px]",3,"click"],[1,"flex","flex-wrap"],[1,"rounded-xl",3,"page","length","pageSize","pageIndex","pageSizeOptions"],[1,"w-[250px]","m-[5px]","cursor-pointer","pb-4"],[1,"w-[250px]","m-[5px]","cursor-pointer","pb-4",3,"matMenuTriggerFor"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["xPosition","after"],["mat-menu-item",""],["mat-menu-item","",3,"click"]],template:function(i,n){i&1&&(r(0,"section",1)(1,"h2",2),l(2),a(),d(3,Le,2,1,"button",3),a(),d(4,Ge,5,5)(5,Xe,1,0,"img",4)),i&2&&(c(2),F(n.homeSvc().title),c(),u(n.homeSvc().showCreate==null||n.homeSvc().showCreate===!0?3:-1),c(),u(n.data.length>0?4:5))},dependencies:[j,O,A,re,N,me,he,ue,fe,ce,ae,ge,pe,Se,X,I,E]})}return t})();var di=(()=>{class t extends Re{constructor(e){super(e),this.url="reports"}vote(e){let i={Id:e};return this.http.post(`${ie.api}/votes`,i)}request(e,i){return this.http.post(`${this.urlBase}/request/${e}`,i)}getReport(e){console.log("opts",this.urlBase);let i=this.fixedQueryParams(e);return this.http.get(`${this.urlBase}/unvalidation`,{params:i})}static \u0275fac=function(i){return new(i||t)(L(J))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var W=q(_e());var Je=["*"];function et(t,o){if(t&1){let e=p();r(0,"mat-dialog-content")(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"h2",0),l(5),a()()(),r(6,"mat-card-content")(7,"section"),T(8),r(9,"div",1)(10,"button",2),l(11," Cancelar "),a(),r(12,"button",3),m("click",function(){h(e);let n=s();return f(n.cleanForm())}),l(13," Limpiar "),a(),r(14,"button",4),m("click",function(){h(e);let n=s();return f(n.onSubmit())}),l(15," Guardar "),a()()()()()()}if(t&2){let e=s();c(5),K(" ",e.dataItem?"Editar":"Crear"," ",e.data().title," "),c(9),y("disabled",e.data().form.invalid)}}var Di=(()=>{class t{dataItem;data=S.required();constructor(){G(()=>{if(this.data()==null)return;let e=this.data();if(this.dataItem=e.data,this.dataItem){let i=JSON.parse(JSON.stringify(this.dataItem));delete i.id,i=ve(i),e.mapEdit&&(i=e.mapEdit(i)),e.form.patchValue(i),e.finalizeEdit&&e.finalizeEdit()}})}ngOnInit(){}cleanForm(){let e={};Object.keys(this.data().form.controls).forEach(i=>{e[i]=null}),this.data().form.patchValue(e),this.data().form.markAllAsTouched()}onSubmit(){return _(this,null,function*(){if(this.data().form.valid&&(yield W.default.fire({title:"\xBFQuieres guardar los cambios?",showCancelButton:!0,confirmButtonText:"Guardar",icon:"question"})).isConfirmed){let i=this.data().form.value;this.data().map&&(i=this.data().map(i),console.log("DATA",i)),this.dataItem?this.data().put(this.dataItem.id,i).subscribe(n=>{this.closeDialog()}):this.data().post(i).subscribe(n=>{this.closeDialog()})}})}closeDialog(){return _(this,null,function*(){yield W.default.fire({title:"La operaci\xF3n se realizo con \xE9xito",icon:"success",confirmButtonText:"Aceptar"}),this.data().dialogRef.close({modify:!0})})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=w({type:t,selectors:[["app-form-cms"]],inputs:{data:[1,"data"]},standalone:!0,features:[C],ngContentSelectors:Je,decls:1,vars:1,consts:[[1,"title"],[1,"flex","justify-end","w-full","flex-wrap"],["mat-raised-button","","type","button","mat-dialog-close","","color","warn",1,"ml-[5px]","mt-[5px]"],["mat-raised-button","","type","button",1,"ml-[5px]","mt-[5px]",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"ml-[5px]","mt-[5px]",3,"click","disabled"]],template:function(i,n){i&1&&(k(),d(0,et,16,3,"mat-dialog-content")),i&2&&u(n.data()?0:-1)},dependencies:[j,O,oe,A,N,ne,se,le,I,E,De,we,Ce]})}return t})();export{oi as a,Di as b,di as c};
